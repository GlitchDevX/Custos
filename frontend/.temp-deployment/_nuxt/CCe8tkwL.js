import{x as I,i as S,h as m,c as y,o as B,s as k,T as D,n as w,p as b}from"./C5MHcV20.js";const o=I(null),l=I(null),x=(a,u)=>{let r=!1;return(...n)=>{r||(a(...n),r=!0,setTimeout(()=>r=!1,u))}},C=["draggable"],L=S({__name:"Draggable",props:{ceiling:{default:.8},floor:{default:.2},isDraggable:{type:Boolean,default:!0},isDroppable:{type:[Boolean,Function],default:!0},parentIds:{},id:{}},emits:["onDragEnd","onDragStart"],setup(a,{expose:u,emit:r}){const n=r,s=m(()=>a.parentIds.at(-1)??null),h=e=>{!e.dataTransfer||!(e.target instanceof HTMLElement)||!a.isDraggable||(e.target.classList.add("dragging"),e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",o.value={id:a.id,parentId:s.value},n("onDragStart",{id:a.id,parentId:s.value}))},E=e=>typeof a.isDroppable=="function"?a.isDroppable(o.value,{id:a.id,parentId:s.value,offset:e}):a.isDroppable,g=x(e=>{var t,d;if(!o.value||o.value.id===a.id||a.parentIds.includes(((t=o.value)==null?void 0:t.id)??""))return;const f=(d=l.value)==null?void 0:d.offset,v=e.target.offsetHeight,c=a.floor*v,p=a.ceiling*v;let i=3;e.offsetY<=0&&f&&f!==3?i=f:e.offsetY<=c?i=0:e.offsetY>=p?i=1:e.offsetY>c&&e.offsetY<p&&(i=2),E(i)&&(l.value={id:a.id,parentId:s.value,offset:i})},25),T=["above","below","asChild"],Y=m(()=>{var e;let t="sidebar-indent-nested";return a.id===((e=l.value)==null?void 0:e.id)&&(t+=` dragover-${T[l.value.offset]}`),t}),_=()=>{if(!l.value||!o.value)return;const e={...o.value},t={...l.value};o.value=null,l.value=null,document.querySelectorAll("div.dragging").forEach(d=>d.classList.remove("dragging")),e.id!==t.id&&n("onDragEnd",e,t)};return u({draggingItem:o,hoveredItem:l}),(e,t)=>(B(),y("div",{class:w(Y.value),draggable:e.isDraggable,onDragend:_,onDragover:t[0]||(t[0]=D((...d)=>b(g)&&b(g)(...d),["prevent","stop"])),onDragstart:D(h,["stop"])},[k(e.$slots,"default",{},void 0,!0)],42,C))}}),A=(a,u)=>{const r=a.__vccOpts||a;for(const[n,s]of u)r[n]=s;return r},M=A(L,[["__scopeId","data-v-a89d6a6e"]]);export{M as m};
