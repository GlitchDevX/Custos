import{u as nt,v as ot,f as it,V as rt,C as ut,m as Se,z as be,s as he,a as Ke,b as pe,g as fe,c as ct,d as dt,e as mt,w as Ie,p as Ae,h as pt,x as ft,i as We,F as vt,J as ht,W as yt,I as gt,K as bt,T as ee,j as ve,k as Ue,l as Je,n as P,S as Te,o as X,q as xt,r as qe,t as wt,y as xe,B as kt,A as ge,D as _t,E as we,Q as Ye,G as De,$ as je,H as Pe,L as Ct,M as Rt,N as qt,O as te,P as $t,R as Me,U as St,X as Ne,Y as Dt,Z as Ve,_ as It}from"./B-w2PmyG.js";import{i as ce,C as Et,x as F,D as Ut,c as N,M as _e,o as p,b as g,E as Qe,q as S,j as W,p as e,R as Tt,a as m,m as Mt,T as B,l as zt,A as Wt,t as ae,n as H,K as oe,an as ye,h as V,w,G as ue,H as ke,d as ie,J as Xe,N as Oe,S as Re,a9 as Ot,au as At,ck as Be,s as Le,B as jt,r as Pt,U as Nt,a7 as Vt,P as Ge,aq as Bt}from"./C5MHcV20.js";import{d as Ze}from"./DxoyWOnx.js";import{m as et,c as Lt,o as Ht,C as Ft,y as Kt,D as Jt,h as Yt}from"./CGsXLUgW.js";import{i as He}from"./sK4DJOrQ.js";import{g as Qt,m as Xt}from"./Dvs1YDLf.js";import{a as Gt,w as ze}from"./Dni0qEc-.js";import{$ as Zt}from"./XJVyCFcA.js";import{C as tt}from"./BZQTiNcE.js";import{m as ea}from"./CCe8tkwL.js";import"./CtBxx05M.js";import"./B45bc6ym.js";import"./CV4Hssdo.js";import"./DRFfvYGx.js";const $e=o=>o?.["x-internal"]===!0||o?.["x-scalar-ignore"]===!0,ta=["aria-label"],aa=ce({inheritAttrs:!1,__name:"ScalarSidebarSearchInput",props:Et({autofocus:{type:Boolean},loading:{},label:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const t=F(null),a=Ut(o,"modelValue");function r(){a.value="",t.value&&t.value.focus()}const{classCx:f,otherAttrs:s}=nt();return _e(()=>o.autofocus&&t.value?.focus()),(b,u)=>(p(),N("label",zt(Wt(e(f)("flex items-center rounded border text-base has-[:focus-visible]:bg-b-1 has-[:focus-visible]:outline h-8 gap-1 pl-2 pr-1.5","bg-sidebar-b-search border-sidebar-border-search",a.value?"text-c-1":"text-sidebar-c-search"))),[g(e(ot),{class:"text-sidebar-c-search size-4"}),Qe(m("input",Mt({ref_key:"inputRef",ref:t,"aria-label":b.label??"Enter search query",autocapitalize:"off",autocomplete:"off",autocorrect:"off",class:"flex-1 appearance-none rounded border-none bg-transparent outline-none",placeholder:"Search...",spellcheck:"false",type:"search"},e(s),{"onUpdate:modelValue":u[0]||(u[0]=v=>a.value=v)}),null,16,ta),[[Tt,a.value]]),b.loading&&b.loading.isLoading?(p(),S(e(it),{key:0,class:"mr-3 self-center",loadingState:b.loading,size:"md"},null,8,["loadingState"])):a.value?(p(),S(e(ut),{key:1,class:"p-0.25 size-4",icon:e(rt),weight:"bold",label:"Clear Search",onClick:B(r,["stop","prevent"])},null,8,["icon"])):W("",!0)],16))}}),sa={parse(o){try{return{error:!1,data:JSON.parse(o)}}catch(t){return{error:!0,message:t.message?String(t.message):"Unknown Error"}}}},la=["aria-pressed"],na={class:"sr-only"},oa={class:"size-4",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ia={"clip-path":"url(#mask)"},ra=ce({__name:"SidebarToggle",setup(o){const{isSidebarOpen:t,toggleSidebarOpen:a}=Se();return(r,f)=>(p(),N("button",{"aria-pressed":e(t),class:"scalar-sidebar-toggle text-c-3 hover:bg-b-2 active:text-c-1 rounded-lg p-2",type:"button",onClick:f[0]||(f[0]=(...s)=>e(a)&&e(a)(...s))},[m("span",na,ae(e(t)?"Hide":"Show")+" sidebar",1),(p(),N("svg",oa,[f[1]||(f[1]=m("defs",null,[m("clipPath",{id:"mask"},[m("path",{"clip-rule":"evenodd",d:"M9 3.2H4c-1.7 0-3 1.3-3 3v11.5c0 1.7 1.3 3 3 3h5V3.2z"})])],-1)),m("g",ia,[m("path",{class:H(["transition-transform duration-300",e(t)?"translate-x-0":"-translate-x-1/2"]),d:"M1 3.2h8v17.5H1z",fill:"currentColor"},null,2)]),f[2]||(f[2]=m("path",{d:"M20 20.8H4c-1.7 0-3-1.3-3-3V6.2c0-1.7 1.3-3 3-3h16c1.7 0 3 1.3 3 3v11.5c0 1.7-1.3 3-3 3zM9 3.2v17.5",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,-1))]))],8,la))}}),ua={"page-view":be.object({to:be.string(),from:be.string(),hostname:be.string()})},at=Object.keys(ua);be.enum(at);const ca=(o,t)=>{async function a(r,...[f]){if(!at.includes(r))throw new Error("[Analytics]: Invalid event submission");const s=t();await fetch(`${o}/analytics/send`,{method:"POST",headers:{"content-type":"application/json",...s?{authorization:`Bearer ${s}`}:{}},body:JSON.stringify({event:r,data:f})})}return{capture:a}},da=ca("https://api.scalar.com",()=>null);function ma(){const{layout:o}=he();if(!(!Ke().value.telemetry||o==="modal"))return da}const pa=o=>{const t=new Set;return o&&["path","query","headers","cookies"].some(a=>o.parameters?.[a]?.some(r=>{r.required&&r.value===""&&t.add(r.key)})),t},fa=5*1e3,va=60*1e3,ha=()=>{const{toast:o}=We(),t=pe(),a=fe(),{activeCollection:r,activeWorkspace:f}=t,{collectionMutators:s}=a,b=l=>o(`[useOpenApiWatcher] Changes to the ${l} were not applied`,"error"),u=l=>{l.path[0]==="info"||l.path[0]==="security"?vt(l,t,a)||b("collection"):l.path[0]==="components"&&l.path[1]==="securitySchemes"?ht(l,t,a)||b("securitySchemes"):l.path[0]==="servers"?yt(l,t,a)||b("servers"):l.path[0]==="tags"?gt(l,t,a)||b("tags"):l.path[0]==="paths"&&(bt(l,t,a)||b("requests"))},{pause:v,resume:R}=ct(async()=>{const l=r.value?.documentUrl;if(!l)return;const q=Ie[l];try{const D=await dt(l,f.value?.proxyUrl,void 0,!1),C=mt(D);if(s.edit(r.value.uid,"watchModeStatus","WATCHING"),q?.hash)if(q.hash&&q.hash!==C){const{schema:k}=await Ae(D),y=pt(q.schema,k),E=ft(y);try{E.forEach(u),Ie[l]={hash:C,schema:k}}catch(_){console.error("[useOpenApiWatcher] Error:",_)}}else console.log("[useOpenApiWatcher] No changes detected yet…");else{const{schema:k}=await Ae(D);k&&(Ie[l]={hash:C,schema:k})}}catch(D){console.error("[useOpenApiWatcher] Error:",D),console.info("[useOpenApiWatcher] Pausing watcher for 60 seconds"),v(),s.edit(r.value.uid,"watchModeStatus","ERROR"),o("[useOpenApiWatcher] Unable to fetch the spec file, paused the watcher for 60 seconds","error"),setTimeout(()=>{console.info("[useOpenApiWatcher] Resuming watcher"),R()},va)}},fa);oe([()=>r.value?.documentUrl,()=>r.value?.watchMode],([l,q])=>{l&&q?(console.info(`[useOpenApiWatcher] Watching ${l} …`),R()):r.value&&(v(),s.edit(r.value.uid,"watchModeStatus","IDLE"))},{immediate:!0})},ya=`         ,\\
         \\\\\\,_
          \\\` ,\\
     __,.-" =__)
   ."        )
,_/   ,    \\/\\_
\\_| )_-\\ \\_-\`
   \`-----\` \`--\``,ga=`         __
        // \\,_
          \\\` ,\\
     __,.-" =__)
   ."        )
,_/   ,    \\/\\ 
\\_| // /  /  /
   /  /    `,ba={class:"m-0 flex items-center gap-1.5 font-medium whitespace-nowrap"},xa={class:"flex h-4 w-4 items-center justify-center"},wa=ce({__name:"EnvironmentSelector",setup(o){const{activeCollection:t,activeWorkspace:a,activeEnvironment:r}=pe(),{collectionMutators:f}=fe(),{layout:s}=he(),b=ye(),u=C=>{t.value&&a.value&&(f.edit(t.value.uid,"x-scalar-active-environment",C),a.value.activeEnvironmentId=C)},v=()=>b.push({name:"environment.default",params:{[X.Workspace]:a.value?.uid}}),R=V(()=>{const{value:C}=r,{value:k}=t;return C?.name||k?.["x-scalar-active-environment"]||"No Environment"}),l=V(()=>{const{value:C}=t,k=C?.["x-scalar-environments"];return k?Object.entries(k).map(([y,E])=>({...E,uid:y,name:y})):[]}),q=()=>{const C=l.value;if(C.length>0){const k=C[C.length-1];k?.uid&&u(k.uid)}};oe(l,(C,k)=>{C.length>k.length&&q()});const D=C=>{const k=C["x-scalar-active-environment"];k&&t.value&&a.value?(t.value["x-scalar-active-environment"]=k,a.value.activeEnvironmentId=k):a.value&&(a.value.activeEnvironmentId="")};return oe(t,C=>C&&D(C)),_e(()=>{t.value&&D(t.value)}),(C,k)=>(p(),S(e(Te),{teleport:""},{items:w(()=>[(p(!0),N(ue,null,ke(l.value,y=>(p(),S(e(ve),{key:y.uid,class:"group/item flex items-center gap-1.5 overflow-hidden text-ellipsis whitespace-nowrap",onClick:B(E=>u(y.uid),["stop"])},{default:w(()=>[g(e(Ue),{selected:e(t)?.["x-scalar-active-environment"]===y.uid},null,8,["selected"]),ie(" "+ae(y.name),1)]),_:2},1032,["onClick"]))),128)),g(e(ve),{class:"group/item flex items-center gap-1.5 overflow-hidden text-ellipsis whitespace-nowrap",onClick:k[0]||(k[0]=B(y=>u(""),["stop"]))},{default:w(()=>[g(e(Ue),{selected:e(r)?.uid===""&&e(t)?.["x-scalar-active-environment"]===""||e(r)?.name==="No Environment"},null,8,["selected"]),k[1]||(k[1]=ie(" No Environment "))]),_:1,__:[1]}),g(e(Je)),e(s)!=="modal"?(p(),S(e(ve),{key:0,class:"flex items-center gap-1.5",onClick:v},{default:w(()=>[m("div",xa,[g(e(P),{icon:"Brackets",size:"sm"})]),k[2]||(k[2]=m("span",{class:"leading-none"},"Manage Environments",-1))]),_:1,__:[2]})):W("",!0)]),default:w(()=>[g(e(ee),{class:"text-c-1 hover:bg-b-2 line-clamp-1 h-auto w-fit justify-start px-1.5 py-1.5 font-normal",variant:"ghost"},{default:w(()=>[m("h2",ba,ae(R.value),1)]),_:1})]),_:1}))}});function ka(){const o=ye(),{activeWorkspace:t,activeWorkspaceRequests:a,activeWorkspaceCollections:r}=pe(),{requests:f,tags:s}=fe(),b=F([]),u=F([]),v=F(0),R=F(""),l=F(null),q=F([]),D=new xt(b.value,{keys:["title","description","body"]}),C=()=>{R.value="",v.value=0,u.value=[],l.value instanceof HTMLInputElement&&l.value.blur()},k=d=>{b.value=d.filter(h=>!$e(h)).filter(h=>!r.value?.find(O=>O.requests.includes(h.uid))?.tags.map(O=>s[O]).filter(qe).filter(O=>h.tags?.includes(O.name)).filter(O=>$e(O)).length).map(h=>({id:h.uid,title:h.summary??h.method,description:h.description??"",httpVerb:h.method,path:h.path,link:o?.resolve({name:"request",params:{[X.Request]:h.uid,[X.Workspace]:t.value?.uid}})?.href})),D.setCollection(b.value)},y=()=>{v.value=0,u.value=D.search(R.value)};oe(R,d=>{d.length?y():u.value=[]});const E=d=>{const h=d==="up"?-1:1,O=c.value.length;v.value=(v.value+h+O)%O,Xe(()=>{const J=q.value[v.value];J instanceof HTMLElement&&J.scrollIntoView({behavior:"smooth",block:"center"})})},_=()=>{if(v.value>=0){const d=c.value[v.value];d&&U(d)}},T=V(()=>a.value.map(d=>f[d]).filter(qe));oe(a,()=>{k(T.value)},{immediate:!0});const U=d=>{o.push(d.item.id),C()},c=V(()=>R.value.length===0?b.value.map(d=>({item:d})):u.value);return{searchText:R,searchResultsWithPlaceholderResults:c,selectedSearchResult:v,onSearchResultClick:U,fuseSearch:y,searchInputRef:l,searchResultRefs:q,navigateSearchResults:E,selectSearchResult:_,populateFuseDataArray:k}}function _a(o,{collections:t,collectionMutators:a,tags:r,tagMutators:f,workspaceMutators:s}){const{layout:b}=he(),u=(v,R)=>{v.type==="collection"?a.edit(v.uid,"children",R):v.type==="tag"&&f.edit(v.uid,"children",R)};return{handleDragEnd:(v,R)=>{if(!v||!R)return;const{id:l,parentId:q}=v,{id:D,parentId:C,offset:k}=R;if(q?t[q]?a.edit(q,"children",t[q].children.filter(y=>y!==l)):r[q]&&f.edit(q,"children",r[q].children.filter(y=>y!==l)):s.edit(o.value?.uid,"collections",o.value?.collections.filter(y=>y!==l)??[]),k===2){const y=t[D]||r[D];y&&u(y,[...y.children??[],l])}else if(C){const y=t[C]||r[C];if(!y)return;const E=[...y.children??[]],_=E.findIndex(T=>D===T)??0;E.splice(_+k,0,l),u(y,E)}else{const y=[...o.value?.collections??[]],E=y.findIndex(_=>D===_)??0;y.splice(E+k,0,l),s.edit(o.value?.uid,"collections",y)}},isDroppable:(v,R)=>!(b==="modal"||!t[v.id]&&R.offset!==2||t[v.id]&&t[R.id]?.info?.title==="Drafts")}}const Ca={class:"grid grid-cols-[auto_1fr] gap-2"},Ra={class:"flex aspect-square"},qa=ce({__name:"EditSidebarListCollection",props:{name:{},icon:{}},emits:["close","edit"],setup(o,{emit:t}){const a=o,r=t,f=F(a.name),s=F(a.icon);return(b,u)=>(p(),S(Gt,{onCancel:u[2]||(u[2]=v=>r("close")),onSubmit:u[3]||(u[3]=v=>r("edit",f.value,s.value))},{default:w(()=>[m("div",Ca,[m("div",Ra,[g(Zt,{modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=v=>s.value=v),placement:"bottom-start"},{default:w(()=>[g(e(ee),{class:"aspect-square h-auto px-0",variant:"outlined"},{default:w(()=>[g(e(Ze),{class:"text-c-2 size-4",src:s.value},null,8,["src"])]),_:1})]),_:1},8,["modelValue"])]),g(e(wt),{modelValue:f.value,"onUpdate:modelValue":u[1]||(u[1]=v=>f.value=v),autofocus:"",class:"flex-1"},null,8,["modelValue"])])]),_:1}))}}),$a=ce({__name:"RequestSidebarItemMenu",props:{menuItem:{}},emits:["closeMenu","toggleWatchMode","clearDrafts"],setup(o,{emit:t}){const a=o,r=t,{replace:f}=ye(),{activeRouterParams:s,activeWorkspaceCollections:b,activeWorkspaceRequests:u}=pe(),{events:v,requestMutators:R}=fe(),l=xe(),q=xe(),D=xe(),C=()=>v.commandPalette.emit({commandName:"Add Example",metaData:{itemUid:a.menuItem.item?.entity.uid}}),k=(d,h)=>{a.menuItem.item?.edit(d,h),l.hide()},y=()=>{if(a.menuItem.item?.delete(),!u.value.length){const{request:d}=Ye(),h=b.value.find(O=>O.info?.title==="Drafts");h&&(R.add(d,h.uid),f({name:"request",params:{[X.Request]:d.uid}}))}if(s.value[X.Request]===a.menuItem.item?.entity.uid&&f({name:"request",params:{[X.Request]:"default"}}),s.value[X.Examples]===a.menuItem.item?.entity.uid&&f({name:"request",params:{[X.Request]:"default"}}),b.value[0]){const d=b.value[0].requests[0];f({name:"request",params:{[X.Request]:d}})}q.hide()},E=F(null);oe([()=>a.menuItem.open,E],async([d])=>{d&&E.value?.$parent?.$el&&E.value.$parent.$el.focus()});const _=()=>a.menuItem.open&&r("closeMenu");_e(()=>window.addEventListener("click",_)),Oe(()=>window.removeEventListener("click",_));const T=()=>{r("toggleWatchMode",a.menuItem.item)},U=()=>{r("clearDrafts"),D.hide()},c=V(()=>a.menuItem.item?.title==="Drafts");return(d,h)=>(p(),N(ue,null,[d.menuItem.targetRef&&d.menuItem.open?(p(),S(e(_t),{key:0,placement:"right-start",target:d.menuItem.targetRef,teleport:""},{floating:w(()=>[g(e(kt),{onKeydown:h[3]||(h[3]=Re(O=>d.$emit("closeMenu"),["escape"]))},{default:w(()=>[d.menuItem.item?.entity.type==="request"?(p(),S(e(ge),{key:0,class:"flex items-center gap-2",onClick:C},{default:w(()=>[g(e(P),{class:"inline-flex",icon:"Example",size:"md",thickness:"1.5"}),h[8]||(h[8]=m("span",null,"Add Example",-1))]),_:1,__:[8]})):W("",!0),c.value?W("",!0):(p(),S(e(ge),{key:1,ref_key:"menuRef",ref:E,class:"flex items-center gap-2",onClick:h[0]||(h[0]=O=>e(l).show())},{default:w(()=>[g(e(P),{class:"inline-flex",icon:"Edit",size:"md",thickness:"1.5"}),m("span",null,[d.menuItem.item?.entity.type==="collection"?(p(),N(ue,{key:0},[ie(" Edit ")],64)):(p(),N(ue,{key:1},[ie(" Rename ")],64))])]),_:1},512)),d.menuItem.item?.documentUrl?(p(),S(e(ge),{key:2,ref_key:"menuRef",ref:E,class:"flex items-center gap-2",onClick:T},{default:w(()=>[g(e(P),{class:"inline-flex",icon:d.menuItem.item?.watchMode?"Unwatch":"Watch",size:"md",thickness:"1.5"},null,8,["icon"]),m("span",null,ae(d.menuItem.item?.watchMode?"Disable Watch Mode":"Enable Watch Mode"),1)]),_:1},512)):W("",!0),c.value?W("",!0):(p(),S(e(ge),{key:3,class:"flex items-center gap-2",onClick:h[1]||(h[1]=O=>e(q).show())},{default:w(()=>[g(e(P),{class:"inline-flex",icon:"Delete",size:"md",thickness:"1.5"}),h[9]||(h[9]=m("span",null,"Delete",-1))]),_:1,__:[9]})),c.value?(p(),S(e(ge),{key:4,class:"flex items-center gap-2",onClick:h[2]||(h[2]=O=>e(D).show())},{default:w(()=>[g(e(P),{class:"inline-flex",icon:"Delete",size:"md",thickness:"1.5"}),h[10]||(h[10]=m("span",null,"Clear Drafts",-1))]),_:1,__:[10]})):W("",!0)]),_:1})]),_:1},8,["target"])):W("",!0),g(e(we),{size:"xxs",state:e(q),title:`Delete ${d.menuItem.item?.resourceTitle}`},{default:w(()=>[g(ze,{variableName:d.menuItem.item?.title??"",warningMessage:d.menuItem.item?.warning,onClose:h[4]||(h[4]=O=>e(q).hide()),onDelete:y},null,8,["variableName","warningMessage"])]),_:1},8,["state","title"]),g(e(we),{size:"xxs",state:e(l),title:`Edit ${d.menuItem.item?.resourceTitle}`},{default:w(()=>[d.menuItem.item?.resourceTitle==="Collection"?(p(),S(qa,{key:0,icon:d.menuItem.item?.icon||"interface-content-folder",name:d.menuItem.item?.title,onClose:h[5]||(h[5]=O=>e(l).hide()),onEdit:k},null,8,["icon","name"])):(p(),S(tt,{key:1,name:d.menuItem.item?.title??"",onClose:h[6]||(h[6]=O=>e(l).hide()),onEdit:k},null,8,["name"]))]),_:1},8,["state","title"]),g(e(we),{size:"xxs",state:e(D),title:"Clear Drafts"},{default:w(()=>[g(ze,{variableName:"All Drafts",warningMessage:"This action will clear all drafts. This cannot be undone.",onClose:h[7]||(h[7]=O=>e(D).hide()),onDelete:U})]),_:1},8,["state"])],64))}}),Sa=De($a,[["__scopeId","data-v-c405ab35"]]),Da=(o,t,a)=>{const r=o.find(u=>u.info?.title==="Drafts"),f=t.length===1;if(!t[0])return!1;const s=r?.requests.includes(t[0]);if(!s)return!1;const b=a[r?.requests[0]??""]?.summary!=="My First Request";return f&&s&&!b},Ia={class:"line-clamp-1 w-full pl-2 break-all"},Ea={class:"flex flex-row items-center gap-1"},Ua={class:"relative"},Ta={class:"flex items-start"},Ma={class:"flex flex-1 flex-row justify-between font-medium"},za={class:"line-clamp-1 w-full text-left break-all"},Wa={class:"relative flex h-fit justify-end"},Oa={class:"flex items-center justify-center",type:"button"},Aa=["aria-expanded"],ja={class:"flex h-5 max-w-[14px] items-center justify-center"},Pa={class:"flex flex-1 flex-row justify-between"},Na={class:"line-clamp-1 w-full text-left font-medium break-all"},Va={class:"relative flex h-fit justify-end"},Ba={class:"flex items-center justify-center",type:"button"},La={key:3},Ee="hover:bg-sidebar-b-active indent-padding-left",Ha=ce({__name:"RequestSidebarItem",props:{isDraggable:{type:Boolean,default:!1},isDroppable:{type:[Boolean,Function],default:!1},parentUids:{},uid:{},menuItem:{}},emits:["onDragEnd","newTab","openMenu"],setup(o,{emit:t}){Ot(i=>({eae2c57a:h.value,"7c91ad9b":O.value}));const a=t,{activeCollection:r,activeRequest:f,activeRouterParams:s,activeWorkspace:b}=pe(),{collections:u,tags:v,requests:R,requestExamples:l,collectionMutators:q,tagMutators:D,requestMutators:C,requestExampleMutators:k,events:y}=fe(),E=ye(),{collapsedSidebarFolders:_,toggleSidebarFolder:T}=Se(),{layout:U}=he(),c=V(()=>{const i=u[o.uid],n=v[o.uid],j=R[o.uid],$=l[o.uid];return i?{title:i.info?.title||"Untitled Collection",entity:i,resourceTitle:"Collection",children:i.children,icon:i["x-scalar-icon"],documentUrl:i.documentUrl,watchMode:i.watchMode,to:i.uid&&i?.info?.title!=="Drafts"?{name:"collection",params:{[X.Workspace]:b.value?.uid,[X.Collection]:i.uid}}:void 0,warning:"This cannot be undone. You're about to delete the collection and all folders and requests inside it.",edit:(L,me)=>{q.edit(i.uid,"info.title",L),me&&q.edit(i.uid,"x-scalar-icon",me)},delete:()=>{b.value&&q.delete(i,b.value)}}:n?{title:n.name,entity:n,resourceTitle:"Tag",children:n.children,warning:"This cannot be undone. You're about to delete the tag and all requests inside it",edit:L=>D.edit(n.uid,"name",L),delete:()=>o.parentUids[0]&&D.delete(n,o.parentUids[0])}:j?{title:j.summary??j.path,to:{name:"request",params:{workspace:b.value?.uid,request:j.uid}},method:j.method,entity:j,resourceTitle:"Request",warning:"This cannot be undone. You're about to delete the request.",children:j.examples.slice(1),edit:L=>C.edit(j.uid,"summary",L),delete:()=>o.parentUids[0]&&C.delete(j,o.parentUids[0])}:$?.requestUid?{title:$.name,to:{name:"request.examples",params:{workspace:b.value?.uid,request:$.requestUid,examples:$.uid}},method:R[$.requestUid]?.method,entity:$,resourceTitle:"Example",warning:"This cannot be undone. You're about to delete the example from the request.",children:[],edit:L=>k.edit($.uid,"name",L),delete:()=>k.delete($)}:{title:"Unknown",entity:{uid:"",type:"unknown"},resourceTitle:"Unknown",children:[],edit:()=>null,delete:()=>null}}),d=V(()=>c.value.entity.type==="collection"&&c.value.title==="Drafts"),h=V(()=>o.parentUids.length?U==="modal"?`${(o.parentUids.length-1)*12}px`:`${o.parentUids.length*12}px`:"12px"),O=V(()=>o.parentUids.length?U==="modal"?`${(o.parentUids.length-1)*12}px`:`${o.parentUids.length*12}px`:"0px"),J=V(()=>_[o.uid]||f.value?.uid===o.uid&&c.value.entity.examples.length>1),Y=V(()=>typeof E.currentRoute.value.name=="string"&&E.currentRoute.value.name.startsWith("request")&&s.value[X.Request]==="default"&&f.value?.uid===o.uid),K=F(null),Z=V(()=>{let i=.5,n=.5;if(!K.value)return{ceiling:i,floor:n};const{draggingItem:j}=K.value;return!u[j?.id]&&c.value.entity.type==="collection"?(i=1,n=0):c.value.entity.type==="tag"&&(i=.8,n=.2),{ceiling:i,floor:n}}),z=(i,n)=>!(U==="modal"||l[n.id]||u[i.id]),I=(i,n)=>{i&&(Ct(["default"]).some(j=>i[j])?a("newTab",n.title||"",n.entity.uid):n.to&&E.push(n.to),Xe(()=>y.focusAddressBar.emit()))};function Q(i){const n=o.parentUids[0]?u[o.parentUids[0]]?.uid||"":i,j=o.parentUids[0]&&v[i]?.name?{tags:[v[i].name]}:{},$=C.add(j,n);$&&(E.push({name:"request",params:{workspace:b.value?.uid,request:$.uid}}),y.hotKeys.emit({focusAddressBar:new KeyboardEvent("keydown",{key:"l"})}))}const re=V(()=>{const{uid:i,watchModeStatus:n}=r.value||{};return i!==c.value.entity.uid?"text-c-3":n==="WATCHING"?"text-c-1":n==="ERROR"?"text-red":"text-c-3"}),de=V(()=>c.value.title==="Drafts"&&U!=="modal"&&c.value.children.length>0),se=V(()=>{const i=R[o.uid];if(i)return!$e(i);const n=v[o.uid];return n?!$e(n):!0});return(i,n)=>{const j=At("RequestSidebarItem",!0);return se.value?(p(),N("li",{key:0,class:H(["relative flex flex-row",[e(U)==="modal"&&i.parentUids.length>1||e(U)!=="modal"&&i.parentUids.length?"before:bg-border indent-border-line-offset mb-[.5px] before:pointer-events-none before:absolute before:top-0 before:left-[calc(.75rem_+_.5px)] before:z-1 before:h-[calc(100%_+_.5px)] before:w-[.5px] last:mb-0 last:before:h-full":""]])},[g(e(ea),{id:c.value.entity.uid,ref_key:"draggableRef",ref:K,ceiling:Z.value.ceiling,class:"gap-1/2 flex flex-1 flex-col text-base",floor:Z.value.floor,isDraggable:i.isDraggable,isDroppable:i.isDroppable,parentIds:i.parentUids,onOnDragEnd:n[12]||(n[12]=(...$)=>i.$emit("onDragEnd",...$))},{default:w(()=>[(c.value.entity.type==="request"||c.value.entity.type==="requestExample")&&c.value.to?(p(),S(e(Be),{key:0,class:"group no-underline",to:c.value.to,onClick:n[1]||(n[1]=B($=>I($,c.value),["prevent"]))},{default:w(({isExactActive:$})=>[m("div",{class:H(["relative flex min-h-8 w-full cursor-pointer flex-row items-start justify-between gap-0.5 rounded py-1.5 pr-2",[Ee,$||Y.value?"bg-sidebar-b-active text-sidebar-c-active font-medium transition-none":"text-sidebar-c-2"]])},[m("span",Ia,ae(c.value.title||"Untitled"),1),m("div",Ea,[m("div",Ua,[e(U)!=="modal"?(p(),S(e(ee),{key:0,class:H(["hover:bg-b-3 hidden aspect-square h-fit px-0.5 py-0 opacity-0 group-hover:flex group-hover:opacity-100 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",{flex:i.menuItem?.item?.entity.uid===c.value.entity.uid&&i.menuItem.open}]),size:"sm",type:"button",variant:"ghost",onClick:n[0]||(n[0]=B(L=>i.$emit("openMenu",{item:c.value,parentUids:i.parentUids,targetRef:L.currentTarget,open:!i.menuItem.open}),["stop","prevent"]))},{default:w(()=>[g(e(P),{icon:"Ellipses",size:"md"})]),_:1},8,["class"])):W("",!0)]),m("span",Ta,[n[13]||(n[13]=ie("   ")),n[14]||(n[14]=m("span",{class:"sr-only"},"HTTP Method:",-1)),c.value.method?(p(),S(e(et),{key:0,class:"font-bold",method:c.value.method},null,8,["method"])):W("",!0)])])],2)]),_:1},8,["to"])):(e(U)!=="modal"||i.parentUids.length)&&c.value.entity.type==="collection"&&c.value.to?(p(),S(e(Be),{key:1,"aria-expanded":!!e(_)[c.value.entity.uid],class:H(["hover:bg-b-2 group relative flex w-full flex-row justify-start gap-1.5 rounded p-1.5 no-underline focus-visible:z-10",[Ee,{"bg-sidebar-b-active text-sidebar-c-active transition-none":typeof e(E).currentRoute.value.name=="string"&&e(E).currentRoute.value.name.startsWith("collection")&&e(E).currentRoute.value.params[e(X).Collection]===c.value.entity.uid,"text-c-2":c.value.title==="Untitled Collection"}]]),to:c.value.to},{default:w(()=>[m("span",{class:"flex h-5 max-w-[14px] cursor-pointer items-center justify-center",onClick:n[2]||(n[2]=B($=>e(T)(c.value.entity.uid),["stop","prevent"]))},[Le(i.$slots,"leftIcon",{},()=>[g(e(je),{class:"text-c-3 shrink-0",open:!!e(_)[c.value.entity.uid]},null,8,["open"])],!0),n[15]||(n[15]=ie("   "))]),m("div",Ma,[m("span",za,ae(c.value.title),1),m("div",Wa,[m("div",{class:H(["items-center gap-px opacity-0 group-hover:flex group-hover:opacity-100 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",{flex:i.menuItem.open,hidden:!i.menuItem.open||i.menuItem.item?.entity.uid!==c.value.entity.uid}])},[e(U)!=="modal"&&!d.value||d.value&&de.value?(p(),S(e(ee),{key:0,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:n[3]||(n[3]=B($=>i.$emit("openMenu",{item:c.value,parentUids:i.parentUids,targetRef:$.currentTarget.parentNode,open:!0}),["stop","prevent"]))},{default:w(()=>[g(e(P),{icon:"Ellipses",size:"md"})]),_:1})):W("",!0),e(U)!=="modal"?(p(),S(e(ee),{key:1,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:n[4]||(n[4]=B($=>Q(c.value.entity.uid),["stop","prevent"]))},{default:w(()=>[g(e(P),{icon:"Add",size:"md",thickness:"2"})]),_:1})):W("",!0)],2),c.value.watchMode?(p(),S(e(Pe),{key:0,placement:"right",offset:12,content:`Watching: ${c.value.documentUrl}`},{default:w(()=>[m("button",Oa,[g(e(P),{class:H(["ml-0.5 text-sm",re.value]),icon:"Watch",size:"md",thickness:"2"},null,8,["class"])])]),_:1},8,["content"])):W("",!0),n[16]||(n[16]=m("span",null," ",-1))])])]),_:3},8,["aria-expanded","class","to"])):e(U)!=="modal"||i.parentUids.length?(p(),N("button",{key:2,"aria-expanded":!!e(_)[c.value.entity.uid],class:H(["hover:bg-b-2 group relative flex w-full flex-row justify-start gap-1.5 rounded p-1.5 focus-visible:z-10",[Ee]]),type:"button",onClick:n[7]||(n[7]=$=>e(T)(c.value.entity.uid))},[m("span",ja,[Le(i.$slots,"leftIcon",{},()=>[g(e(je),{class:"text-c-3 hover:text-c-1 shrink-0",open:!!e(_)[c.value.entity.uid]},null,8,["open"])],!0),n[17]||(n[17]=ie("   "))]),m("div",Pa,[m("span",Na,ae(c.value.title),1),m("div",Va,[m("div",{class:H(["items-center gap-px opacity-0 group-hover:flex group-hover:opacity-100 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",{flex:i.menuItem.open,hidden:!i.menuItem.open||i.menuItem.item?.entity.uid!==c.value.entity.uid}])},[e(U)!=="modal"&&!d.value||d.value&&de.value?(p(),S(e(ee),{key:0,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:n[5]||(n[5]=B($=>i.$emit("openMenu",{item:c.value,parentUids:i.parentUids,targetRef:$.currentTarget.parentNode,open:!0}),["stop","prevent"]))},{default:w(()=>[g(e(P),{icon:"Ellipses",size:"md"})]),_:1})):W("",!0),e(U)!=="modal"?(p(),S(e(ee),{key:1,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:n[6]||(n[6]=B($=>Q(c.value.entity.uid),["stop","prevent"]))},{default:w(()=>[g(e(P),{icon:"Add",size:"md",thickness:"2"})]),_:1})):W("",!0)],2),c.value.watchMode?(p(),S(e(Pe),{key:0,content:"Watching: {{ item.documentUrl }}",placement:"right",offset:12},{default:w(()=>[m("button",Ba,[g(e(P),{class:H(["ml-0.5 text-sm",re.value]),icon:"Watch",size:"md",thickness:"2"},null,8,["class"])])]),_:1})):W("",!0),n[18]||(n[18]=m("span",null," ",-1))])])],10,Aa)):W("",!0),J.value?(p(),N("ul",La,[(p(!0),N(ue,null,ke(c.value.children,$=>(p(),S(j,{key:$,isDraggable:!e(l)[$],isDroppable:z,menuItem:i.menuItem,parentUids:[...i.parentUids,i.uid],uid:$,onNewTab:n[8]||(n[8]=(L,me)=>i.$emit("newTab",L,me)),onOnDragEnd:n[9]||(n[9]=(...L)=>i.$emit("onDragEnd",...L)),onOpenMenu:n[10]||(n[10]=L=>i.$emit("openMenu",L))},null,8,["isDraggable","menuItem","parentUids","uid"]))),128)),c.value.children.length===0?(p(),S(e(ee),{key:0,class:H(["text-c-1 hover:bg-b-2 flex h-8 w-full justify-start gap-1.5 py-0 text-xs",i.parentUids.length?"pl-9":""]),variant:"ghost",onClick:n[11]||(n[11]=$=>Q(c.value.entity.uid))},{default:w(()=>[g(e(P),{icon:"Add",size:"sm"}),n[19]||(n[19]=m("span",null,"Add Request",-1))]),_:1,__:[19]},8,["class"])):W("",!0)])):W("",!0)]),_:3},8,["id","ceiling","floor","isDraggable","isDroppable","parentIds"])],2)):W("",!0)}}}),Fa=De(Ha,[["__scopeId","data-v-4dedda07"]]),Ka={class:"flex w-[inherit] items-center text-base"},Ja={class:"m-0 flex items-center gap-1.5 font-bold"},Ya={class:"line-clamp-1 text-left"},Qa={class:"overflow-hidden text-ellipsis"},Xa={class:"flex h-4 w-4 items-center justify-center"},Ga=ce({__name:"WorkspaceDropdown",setup(o){const{activeWorkspace:t}=pe(),{workspaces:a,workspaceMutators:r,events:f}=fe(),{push:s}=ye(),b=_=>{_!==t.value?.uid&&s({name:"workspace",params:{workspace:_}})},u=V(()=>Object.keys(a).length===1),v=()=>f.commandPalette.emit({commandName:"Create Workspace"}),R=F(""),l=F(""),q=xe(),D=xe(),C=_=>{const T=a[_];T&&(R.value=T.name,l.value=_,q.show())},k=_=>{_.trim()&&(r.edit(l.value,"name",_.trim()),q.hide())},y=_=>{const T=a[_];T&&(R.value=T.name,l.value=_,D.show())},E=async()=>{if(!u.value){const _=t.value?.uid===l.value,T={...a};if(delete T[l.value],r.delete(l.value),_){const U=Object.keys(T)[0];await s({name:"workspace",params:{workspace:U}})}}D.hide()};return(_,T)=>(p(),N("div",null,[m("div",Ka,[g(e(Te),null,{items:w(()=>[(p(!0),N(ue,null,ke(e(a),(U,c)=>(p(),S(e(ve),{key:c,class:"group/item flex w-full items-center gap-1.5 overflow-hidden text-ellipsis whitespace-nowrap",onClick:B(d=>b(U.uid),["stop"])},{default:w(()=>[g(e(Ue),{selected:e(t)?.uid===c},null,8,["selected"]),m("span",Qa,ae(U.name),1),g(e(Te),{placement:"right-start",teleport:""},{items:w(()=>[g(e(ve),{class:"flex gap-2",onMousedown:d=>C(U.uid),onTouchend:B(d=>C(U.uid),["prevent"])},{default:w(()=>[g(e(P),{class:"inline-flex",icon:"Edit",size:"md",thickness:"1.5"}),T[2]||(T[2]=m("span",null,"Rename",-1))]),_:2,__:[2]},1032,["onMousedown","onTouchend"]),u.value?W("",!0):(p(),S(e(ve),{key:0,class:"flex gap-2",onMousedown:B(d=>y(U.uid),["prevent"]),onTouchend:B(d=>y(U.uid),["prevent"])},{default:w(()=>[g(e(P),{class:"inline-flex",icon:"Delete",size:"md",thickness:"1.5"}),T[3]||(T[3]=m("span",null,"Delete",-1))]),_:2,__:[3]},1032,["onMousedown","onTouchend"]))]),default:w(()=>[g(e(ee),{class:"hover:bg-b-3 -mr-1 ml-auto aspect-square h-fit px-0.5 py-0 group-hover/item:flex",size:"sm",type:"button",variant:"ghost"},{default:w(()=>[g(e(P),{icon:"Ellipses",size:"sm"})]),_:1})]),_:2},1024)]),_:2},1032,["onClick"]))),128)),g(e(Je)),g(e(ve),{class:"flex items-center gap-1.5",onClick:v},{default:w(()=>[m("div",Xa,[g(e(P),{icon:"Add",size:"sm"})]),T[4]||(T[4]=m("span",null,"Create Workspace",-1))]),_:1,__:[4]})]),default:w(()=>[g(e(ee),{class:"text-c-1 hover:bg-b-2 line-clamp-1 h-full w-fit justify-start px-1.5 py-1.5 font-normal",variant:"ghost"},{default:w(()=>[m("div",Ja,[m("h2",Ya,ae(e(t)?.name),1)])]),_:1})]),_:1})]),g(e(we),{size:"xxs",state:e(D),title:"Delete workspace"},{default:w(()=>[g(ze,{variableName:R.value,warningMessage:"This cannot be undone. You're about to delete the workspace and everything inside it.",onClose:T[0]||(T[0]=U=>e(D).hide()),onDelete:E},null,8,["variableName"])]),_:1},8,["state"]),g(e(we),{size:"xxs",state:e(q),title:"Rename Workspace"},{default:w(()=>[g(tt,{name:R.value,onClose:T[1]||(T[1]=U=>e(q).hide()),onEdit:k},null,8,["name"])]),_:1},8,["state"])]))}}),Za={class:"bg-b-1 sticky top-0 z-20 flex h-12 items-center px-3"},es={key:1,class:"text-c-3"},ts=["aria-pressed"],as={class:"sr-only"},ss={key:0,class:"search-button-fade sticky top-12 z-10 px-3 py-2.5 pt-0 focus-within:z-20",role:"search"},ls={key:1,class:"contents"},ns={key:0,class:"empty-sidebar-item-content px-2.5 py-2.5"},os={class:"rabbit-ascii relative m-auto mt-2 h-[68px] w-[60px]"},is=ce({__name:"RequestSidebar",emits:["newTab","clearDrafts"],setup(o,{emit:t}){const a=t,{collapsedSidebarFolders:r,isSidebarOpen:f,setCollapsedSidebarFolder:s,toggleSidebarOpen:b}=Se(),{layout:u}=he(),v=fe(),{activeCollection:R,activeWorkspaceCollections:l,activeRequest:q,activeWorkspaceRequests:D,activeWorkspace:C}=pe(),{findRequestParents:k,events:y,requestMutators:E,requests:_}=v,{handleDragEnd:T,isDroppable:U}=_a(C,v),{replace:c}=ye(),d=()=>{y.commandPalette.emit({commandName:"Import from OpenAPI/Swagger/Postman/cURL"})},h=jt(),{toast:O}=We(),J=Pt({open:!1}),Y=F(!1);oe(q,M=>{M&&k(M).forEach(x=>s(x,!0))},{immediate:!0});const{searchText:K,searchResultsWithPlaceholderResults:Z,selectedSearchResult:z,onSearchResultClick:I,fuseSearch:Q,searchInputRef:re,searchResultRefs:de,navigateSearchResults:se,selectSearchResult:i}=ka(),n=F(),j=M=>{M&&(M.toggleSidebar&&b(),M.focusRequestSearch&&re.value?.focus())};_e(()=>y.hotKeys.on(j)),Oe(()=>{y.hotKeys.off(j)});const $=M=>{if(M?.documentUrl){M.watchMode=!M.watchMode;const x=l.value.find(A=>A.uid===M.entity.uid);x&&(x.watchMode=M.watchMode)}};oe(()=>l.value.map(M=>M.watchMode),(M,x)=>{M.forEach((A,G)=>{if(u!=="modal"&&A!==x[G]&&l.value[G]?.info?.title!=="Drafts"&&l.value[G]){const ne=l.value[G];if(!ne)return;const lt=`${ne.info?.title}: Watch Mode ${A?"enabled":"disabled"}`;O(lt,"info")}})});const L=V(()=>{const M=Z.value;if(!M.length)return"No results found";const x=M[z.value]?.item;if(!x)return"No result selected";const A=K.value.length?`${M.length} result${M.length===1?"":"s"} found, `:"",G=`, HTTP Method ${x.httpVerb}, Path ${x.path}`,ne=`${x.title} ${G}`;return`${A}Selected: ${ne}`}),me=()=>{const M=l.value.find(x=>x.info?.title==="Drafts");if(M&&M.requests.forEach(x=>{_[x]&&E.delete(_[x],M.uid)}),D.value.length){const x=l.value[0]?.requests[0];x&&c({name:"request",params:{[X.Request]:x}})}else{const{request:x}=Ye();M&&(E.add(x,M.uid),c({name:"request",params:{[X.Request]:x.uid}}))}};oe(Y,M=>{M||(K.value="")});const le=V(()=>Da(l.value,D.value,_)),Ce=V(()=>u==="modal"&&R.value?[R.value]:l.value);function st(M){!K.value&&M.relatedTarget!==n.value&&(Y.value=!1)}return(M,x)=>(p(),N(ue,null,[Qe(g(e(Xt),{class:H([e(f)?"sidebar-active-width":""])},Vt({content:w(()=>[m("div",Za,[m("div",{class:H(["size-8",{"xl:hidden":e(u)!=="modal"}])},null,2),e(u)!=="modal"?(p(),S(e(Ga),{key:0})):W("",!0),e(u)!=="modal"?(p(),N("span",es," / ")):W("",!0),e(u)!=="modal"?(p(),S(wa,{key:2})):W("",!0),m("button",{ref_key:"searchToggleRef",ref:n,"aria-pressed":Y.value,class:"ml-auto",type:"button",onClick:x[0]||(x[0]=A=>Y.value=!Y.value)},[m("span",as,ae(Y.value?"Hide":"Show")+" search ",1),g(e(P),{class:"text-c-3 hover:bg-b-2 max-h-8 max-w-8 rounded-lg p-1.75 text-sm",icon:"Search"})],8,ts)]),Y.value?(p(),N("div",ss,[g(e(aa),{ref_key:"searchInputRef",ref:re,modelValue:e(K),"onUpdate:modelValue":x[1]||(x[1]=A=>Ge(K)?K.value=A:null),autofocus:"","aria-controls":e(h),label:L.value,onInput:e(Q),onKeydown:[x[2]||(x[2]=Re(B(A=>e(se)("down"),["stop"]),["down"])),x[3]||(x[3]=Re(B(A=>e(i)(),["stop"]),["enter"])),x[4]||(x[4]=Re(B(A=>e(se)("up"),["stop"]),["up"]))],onBlur:st},null,8,["modelValue","aria-controls","label","onInput"])])):W("",!0),m("div",{class:H(["gap-1/2 flex flex-1 flex-col overflow-visible overflow-y-auto px-3 pt-0 pb-3",[{"pb-14":e(u)!=="modal"},{"h-[calc(100%-273.5px)]":le.value}]]),onDragenter:x[7]||(x[7]=B(()=>{},["prevent"])),onDragover:x[8]||(x[8]=B(()=>{},["prevent"]))},[e(K)?(p(),S(e(Rt),{key:0,id:e(h),"aria-label":"Search Results",class:"gap-px",noResults:!e(Z).length},{default:w(()=>[(p(!0),N(ue,null,ke(e(Z),(A,G)=>(p(),S(e(qt),{id:`#search-input-${A.item.id}`,key:A.refIndex,ref_for:!0,ref:ne=>e(de)[G]=ne,selected:e(z)===G,class:"px-2",href:A.item.link,onClick:B(ne=>e(I)(A),["prevent"]),onFocus:ne=>z.value=G},{addon:w(()=>[x[10]||(x[10]=m("span",{class:"sr-only"},"HTTP Method:",-1)),g(et,{class:"font-bold",method:A.item.httpVerb??"get"},null,8,["method"])]),default:w(()=>[ie(ae(A.item.title)+" ",1)]),_:2},1032,["id","selected","href","onClick","onFocus"]))),128))]),_:1},8,["id","noResults"])):(p(),N("nav",ls,[(p(!0),N(ue,null,ke(Ce.value,A=>(p(),S(Fa,{key:A.uid,isDraggable:e(u)!=="modal"&&A.info?.title!=="Drafts",isDroppable:e(U),menuItem:J,parentUids:[],uid:A.uid,onNewTab:x[5]||(x[5]=(G,ne)=>a("newTab",{name:G,uid:ne})),onOnDragEnd:e(T),onOpenMenu:x[6]||(x[6]=G=>Object.assign(J,G))},{leftIcon:w(()=>[A.info?.title==="Drafts"?(p(),S(e(P),{key:0,class:"text-sidebar-c-2 group-hover:hidden",icon:"Scribble",thickness:"2.25"})):(p(),S(e(Ze),{key:1,class:"text-sidebar-c-2 size-3.5 min-w-3.5 stroke-2 group-hover:hidden",src:A["x-scalar-icon"]||"interface-content-folder"},null,8,["src"])),m("div",{class:H({"rotate-90":e(r)[A.uid]})},[g(e(P),{class:"text-c-3 hover:text-c-1 hidden text-sm group-hover:block",icon:"ChevronRight",size:"md"})],2)]),_:2},1032,["isDraggable","isDroppable","menuItem","uid","onOnDragEnd"]))),128))]))],34)]),button:w(()=>[m("div",{class:H({"empty-sidebar-item":le.value})},[le.value?(p(),N("div",ns,[m("div",os,[g(He,{art:e(ya),class:"rabbitsit font-bold"},null,8,["art"]),g(He,{art:e(ga),class:"rabbitjump absolute top-0 left-0 font-bold"},null,8,["art"])]),x[11]||(x[11]=m("div",{class:"mt-2 mb-2 text-center text-sm text-balance"},[m("b",{class:"font-medium"},"Let's Get Started"),m("p",{class:"mt-2"}," Create request, folder, collection or import from OpenAPI/Postman ")],-1))])):W("",!0),e(u)!=="modal"?(p(),S(e(ee),{key:1,class:H(["mb-1.5 hidden h-fit w-full p-1.5 opacity-0",{"flex opacity-100":le.value}]),onClick:d},{default:w(()=>x[12]||(x[12]=[ie(" Import Collection ")])),_:1,__:[12]},8,["class"])):W("",!0),e(u)!=="modal"?(p(),S(Qt,{key:2,click:e(y).commandPalette.emit,hotkey:"K"},{title:w(()=>x[13]||(x[13]=[ie(" Add Item ")])),_:1},8,["click"])):W("",!0)],2)]),_:2},[e(u)!=="modal"?{name:"header",fn:w(()=>[]),key:"0"}:void 0]),1032,["class"]),[[Nt,e(f)]]),e(u)!=="modal"&&J?(p(),S(Sa,{key:0,menuItem:J,onClearDrafts:me,onCloseMenu:x[9]||(x[9]=A=>J.open=!1),onToggleWatchMode:$},null,8,["menuItem"])):W("",!0)],64))}}),rs=De(is,[["__scopeId","data-v-bca9c474"]]),Fe=()=>typeof window<"u"&&"electron"in window,us=(o,t=!1)=>{const a=Object.fromEntries(o);t&&["Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers"].map(s=>s.toLowerCase()).forEach(s=>delete a[s]);const r=Object.keys(a).find(s=>s.toLowerCase()==="x-scalar-modified-headers"),f=r?a[r]?.toString().split(", ")?.map(s=>s.toLowerCase())??[]:[];return Object.keys(a).forEach(s=>{f.includes(s.toLowerCase())&&delete a[s]}),r&&delete a[r],Object.keys(a).forEach(s=>{const b=/^x-scalar-original-/i;if(b.test(s)){const u=s.replace(b,"");a[s]&&(a[u]=a[s],delete a[s])}}),Object.keys(a).forEach(s=>{const b=cs(s);s!==b&&a[s]&&(a[b]=a[s],delete a[s])}),Object.fromEntries(Object.entries(a).sort(([s],[b])=>s.localeCompare(b)))},cs=o=>o.split("-").map(t=>t.charAt(0).toUpperCase()+t.toLowerCase().slice(1)).join("-");function ds(o,t,a){if(!Lt(o))return{body:void 0,contentType:void 0};if(t.body.activeBody==="formData"&&t.body.formData){const r=t.body.formData.encoding==="form-data"?"multipart/form-data":"application/x-www-form-urlencoded",f=t.body.formData.encoding==="form-data"?new FormData:new URLSearchParams;return t.body.formData.value.forEach(s=>{!s.enabled||!s.key||(s.file&&f instanceof FormData?f.append(s.key,s.file,s.file.name):s.value!==void 0&&f.append(s.key,te(s.value,a)))}),{body:f,contentType:r}}return t.body.activeBody==="raw"?{body:te(t.body.raw?.value??"",a),contentType:t.body.raw?.encoding}:t.body.activeBody==="binary"?{body:t.body.binary,contentType:t.body.binary?.type}:{body:void 0,contentType:void 0}}function ms(o,t){const a={};return o.parameters.headers.forEach(r=>{const f=r.key.trim().toLowerCase();r.enabled&&(f!=="content-type"||r.value!=="multipart/form-data")&&(a[f]=te(r.value,t))}),a}function ps(o,t,a){const r=new URLSearchParams,f=(a?.parameters??[]).reduce((s,b)=>(b.in==="query"&&(s[b.name]=b),s),{});return o.parameters.query.forEach(s=>{if(!s.enabled)return;const b=f[s.key];switch(s.type){case"array":{const u=te(s.value??"",t).split(/,\ ?/);if(b?.explode===!1){const v=u.join(",");r.append(s.key,v)}else u.forEach(v=>{r.append(s.key,v.trim())});break}default:{const u=te(s.value??"",t);r.append(s.key,u.trim());break}}}),r}function fs(o,t){const a=new $t(t);return Ht(a.essence)?new TextDecoder(a.parameters.get("charset")).decode(o):new Blob([o],{type:a.essence})}const vs=({environment:o,example:t,globalCookies:a,proxyUrl:r,request:f,securitySchemes:s,selectedSecuritySchemeUids:b=[],server:u,status:v,pluginManager:R})=>{try{const l=o??{},q=new AbortController,D=t.parameters.path.reduce((z,I)=>(I.enabled&&(z[I.key]=te(I.value,l)),z),{}),C=te(u?.url??"",l),k=te(te(f.path,l),D);let y=C||k;if(!y)throw Me.URL_EMPTY;Object.entries(u?.variables??{}).forEach(([z,I])=>{y=te(y,{[z]:D[z]||I.default})});const E=ps(t,l,f),_=ms(t,l),{body:T}=ds(f.method,t,l),{cookieParams:U}=Ft({example:t,env:l,globalCookies:a,serverUrl:y,proxyUrl:r}),c=b.flat().map(z=>s[z]).filter(qe),d=Kt(c,l),h={...Object.entries(d.headers).reduce((z,[I,Q])=>(z[I.toLowerCase()]=Q,z),{}),..._},O=[...U,...d.cookies],J=new URLSearchParams([...E,...d.urlParams]);Fe()&&h["user-agent"]&&(h["X-Scalar-User-Agent"]=h["user-agent"]),y=St(y,k,J);const Y=te(Jt(O,h.Cookie),l);Y&&(Fe()||Ne(r,y)?(console.warn("We're using a `X-Scalar-Cookie` custom header to the request. The proxy will forward this as a `Cookie` header. We do this to avoid the browser omitting the `Cookie` header for cross-origin requests for security reasons."),h["X-Scalar-Cookie"]=Y):(console.warn(`We're trying to add a Cookie header, but browsers often omit them for cross-origin requests for various security reasons. If it's not working, that's probably why. Here are the requirements for it to work:

          - The browser URL must be on the same domain as the server URL.
          - The connection must be made over HTTPS.
          `),h.Cookie=Y));const K=Dt(r,y),Z=new Request(K,{method:f.method.toUpperCase(),body:T??null,headers:h});return[null,{request:Z,sendRequest:async()=>{v?.emit("start"),R&&await R.executeHook("onBeforeRequest",{request:Z});const z=Date.now();try{const I=await fetch(Z,{signal:q.signal}),Q=I.headers.get("content-type")?.startsWith("text/event-stream");v?.emit("stop");const re=Date.now()-z,de=I.clone(),se=us(I.headers,Ne(r,y)),i=I.headers.get("content-type")??"text/plain;charset=UTF-8",n=await de.arrayBuffer(),j=fs(n,i),$=I.clone(),L=$.statusText||Yt[$.status]?.name||"",me=[204,205,304].includes($.status),le=new Response(me?null:$.body,{status:$.status,statusText:L,headers:$.headers});R&&await R.executeHook("onResponseReceived",{response:le,operation:f});const Ce="getSetCookie"in le.headers&&typeof le.headers.getSetCookie=="function"?le.headers.getSetCookie():[];return Q&&I.body?[null,{timestamp:Date.now(),request:t,response:{...le,headers:se,cookieHeaderKeys:Ce,reader:I.body?.getReader(),duration:re,method:f.method,path:k}}]:[null,{timestamp:Date.now(),request:t,response:{...I,headers:se,cookieHeaderKeys:Ce,data:j,size:n.byteLength,duration:Date.now()-z,method:f.method,status:I.status,path:k}}]}catch(I){return v?.emit("abort"),[Ve(I,Me.REQUEST_FAILED),null]}},controller:q}]}catch(l){return console.error(l),v?.emit("abort"),[Ve(l),null]}},hs={class:"flex h-full"},ys={class:"flex h-full flex-1 flex-col"},gs=ce({__name:"RequestRoot",emits:["newTab"],setup(o){const t=fe(),{toast:a}=We(),{layout:r}=he(),f=Ke(),{isSidebarOpen:s}=Se(),b=ma(),{activeCollection:u,activeExample:v,activeEnvironment:R,activeRequest:l,activeWorkspace:q,activeServer:D}=pe(),{cookies:C,requestHistory:k,showSidebar:y,securitySchemes:E,events:_}=t,T=It(),U=F(),c=F(),d=F(new Set),h=F(null),O=V(()=>(u.value?.useCollectionSecurity?u.value?.selectedSecuritySchemeUids:l.value?.selectedSecuritySchemeUids)??[]),J=async()=>{if(!l.value||!v.value||!u.value)return;d.value=pa(v.value);const z=typeof R.value=="object"?R.value.value:"{}",I=sa.parse(z);I.error&&console.error("INVALID ENVIRONMENT!");const Q=I.error||typeof I.data!="object"?{}:I.data??{},re=q.value?.cookies.map($=>C[$]).filter(qe)??[],de=u.value?.info?.title==="Drafts"?void 0:D.value,[se,i]=vs({request:l.value,example:v.value,selectedSecuritySchemeUids:O.value,proxyUrl:q.value?.proxyUrl??"",environment:Q,globalCookies:re,status:_.requestStatus,securitySchemes:E,server:de,pluginManager:T});if(f.value?.onRequestSent?.(l.value.path??""),se){a(se.message,"error");return}c.value=i.controller;const[n,j]=await i.sendRequest();h.value=j,n?a(n.message,"error"):k.push(Z(j))},Y=async()=>c.value?.abort(Me.REQUEST_ABORTED);function K(){b?.capture("client-send-request")}_e(()=>{_.executeRequest.on(J),_.executeRequest.on(K),_.cancelRequest.on(Y)}),ha(),Oe(()=>{_.executeRequest.off(J),_.executeRequest.off(K)}),oe(()=>v.value?.parameters,()=>{d.value.clear()},{deep:!0});const Z=z=>{try{return structuredClone(z)}catch{const I={...z};return z.response?.data&&(z.response.data instanceof Blob||z.response.data instanceof ArrayBuffer?I.response.data=z.response.data:I.response.data=JSON.parse(JSON.stringify(z.response.data))),I}};return(z,I)=>(p(),N("div",{ref_key:"element",ref:U,class:H(["bg-b-1 relative z-0 flex h-full flex-1 flex-col overflow-hidden pt-0",{"!mr-0 !mb-0 !border-0":e(r)==="modal"}])},[e(y)?(p(),S(ra,{key:0,modelValue:e(s),"onUpdate:modelValue":I[0]||(I[0]=Q=>Ge(s)?s.value=Q:null),class:H(["absolute top-2 left-3 z-50",[{hidden:e(s)},{"xl:!flex":!e(s)},{"!flex":e(r)==="modal"}]])},null,8,["modelValue","class"])):W("",!0),m("div",hs,[e(y)?(p(),S(rs,{key:0,onNewTab:I[1]||(I[1]=Q=>z.$emit("newTab",Q))})):W("",!0),m("div",ys,[g(e(Bt),{invalidParams:d.value,requestResult:h.value,selectedSecuritySchemeUids:O.value},null,8,["invalidParams","requestResult","selectedSecuritySchemeUids"])])])],2))}}),Ts=De(gs,[["__scopeId","data-v-c648cff4"]]);export{Ts as default};
