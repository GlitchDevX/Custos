import{i as V,h as g,q as v,o as r,x as q,K as $,w as i,b as n,a as b,d as f,p as k,an as I,cl as O,M as F,N as G,c as M,G as R,H as T,T as W}from"./C5MHcV20.js";import{b as U,g as B,a5 as D,E as z,i as H,G as L,y as P,o as N}from"./B-w2PmyG.js";import{r as Z}from"./DMOhKGIm.js";import{m as J,g as Q}from"./Dvs1YDLf.js";import{_ as X,p as Y}from"./CcPz-bu3.js";import{u as ee}from"./bbYeuRSJ.js";import{x as ae}from"./BiT_m2g7.js";import{b as oe}from"./CrZCX3n8.js";import{q as te}from"./Cd1D8BHs.js";import{h as se,E as y}from"./DpW4S5al.js";import"./CtBxx05M.js";import"./B45bc6ym.js";import"./CV4Hssdo.js";import"./DRFfvYGx.js";import"./sK4DJOrQ.js";import"./CCe8tkwL.js";import"./Dni0qEc-.js";const le=V({__name:"CookieForm",setup(_){const{activeCookieId:m}=U(),{cookies:c,cookieMutators:p}=B(),o=[{label:"Name",key:"name",placeholder:"session_id"},{label:"Value",key:"value",placeholder:"my-cookie-session-id"},{label:"Domain",key:"domain",placeholder:"example.com"}],d=g(()=>c[m.value]||D.parse({name:"",value:"",domain:"",path:""})),h=(l,e)=>{p.edit(m.value,l,e)};return(l,e)=>(r(),v(te,{data:d.value,onUpdate:h,options:o},null,8,["data"]))}}),ie={class:"flex h-8 items-start gap-2 text-sm"},ue={class:"flex h-8 items-start gap-2 text-sm"},ne={class:"flex h-8 items-start gap-2 text-sm"},me=V({__name:"CookieModal",props:{state:{}},emits:["cancel","submit"],setup(_,{emit:m}){const c=_,p=m,o=q({name:"",value:"",domain:""}),{toast:d}=H(),h=()=>{if(!o.value.name||!o.value.value){d("Please fill in all fields before adding a cookie.","error");return}p("submit",o.value),c.state.hide()};return $(()=>c.state.open,l=>{l&&(o.value={name:"",value:"",domain:""})}),(l,e)=>(r(),v(k(z),{size:"xs",state:l.state,title:"Add Cookie"},{default:i(()=>[n(se,{disabled:!o.value.name||!o.value.value,onCancel:e[3]||(e[3]=u=>p("cancel")),onSubmit:h},{submit:i(()=>e[7]||(e[7]=[f("Add Cookie")])),default:i(()=>[b("div",ie,[e[4]||(e[4]=f(" Name: ")),n(y,{modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=u=>o.value.name=u),autofocus:"",class:"!p-0",placeholder:"session_id"},null,8,["modelValue"])]),b("div",ue,[e[5]||(e[5]=f(" Value: ")),n(y,{modelValue:o.value.value,"onUpdate:modelValue":e[1]||(e[1]=u=>o.value.value=u),autofocus:"",class:"!p-0",placeholder:"my-cookie-session-id"},null,8,["modelValue"])]),b("div",ne,[e[6]||(e[6]=f(" Domain: ")),n(y,{modelValue:o.value.domain,"onUpdate:modelValue":e[2]||(e[2]=u=>o.value.domain=u),autofocus:"",class:"!p-0",placeholder:"example.com"},null,8,["modelValue"])])]),_:1},8,["disabled"])]),_:1},8,["state"]))}}),de=L(me,[["__scopeId","data-v-694018d6"]]),re={class:"flex-1"},ce={class:"relative mb-[.5px] last:mb-0"},Be=V({__name:"Cookies",setup(_){const{cookies:m,cookieMutators:c,events:p,workspaceMutators:o}=B(),{activeWorkspace:d,activeCookieId:h}=U(),l=I(),e=O(),u=P(),E=s=>{const t=D.parse({name:s.name,value:s.value,domain:s.domain,path:"/"});c.add(t),o.edit(d.value?.uid,"cookies",[...d.value?.cookies??[],t.uid]),l.push({name:"cookies",params:{cookies:t.uid}})},A=s=>{c.delete(s),o.edit(d.value?.uid,"cookies",[...(d.value?.cookies??[]).filter(a=>a!==s)]);const t=Object.values(m).filter(a=>a.uid!==s);if(t.length>0){const a=t[t.length-1];a&&l.push(a.uid)}else l.push({name:"cookies",params:{[N.Cookies]:"default"}})},C=()=>{u.show()},w=s=>{s?.createNew&&e.name==="cookies"&&C()},K=(s,t)=>{const a={name:"cookies",params:{workspace:d.value?.uid??"default",cookies:t}};if(s.metaKey){const x=l.resolve(a).href;window.open(x,"_blank");return}l.push(a)};F(()=>p.hotKeys.on(w)),G(()=>p.hotKeys.off(w));const S=g(()=>m[h.value]),j=g(()=>Object.keys(m).length>0&&S.value);return $(()=>e.query.openCookieModal,s=>{s==="true"&&C()},{immediate:!0}),(s,t)=>(r(),v(ee,null,{default:i(()=>[n(k(J),{title:"Cookies"},{content:i(()=>[b("div",re,[n(X,null,{default:i(()=>[(r(!0),M(R,null,T(Object.values(k(m)),a=>(r(),M("li",{key:a.uid,class:"gap-1/2 flex flex-col"},[b("div",ce,[(r(),v(Y,{key:a.uid,class:"text-xs",isDeletable:"",to:{name:"cookies",params:{[k(N).Cookies]:a.uid}},type:"cookies",variable:{name:a.name,uid:a.uid},warningMessage:"Are you sure you want to delete this cookie?",onClick:W(x=>K(x,a.uid),["prevent"]),onDelete:x=>A(a.uid)},null,8,["to","variable","onClick","onDelete"]))])]))),128))]),_:1})])]),button:i(()=>[n(Q,{click:C,hotkey:"N"},{title:i(()=>t[1]||(t[1]=[f(" Add Cookie ")])),_:1})]),_:1}),n(ae,{class:"flex-1"},{default:i(()=>[j.value?(r(),v(oe,{key:0,class:"*:border-b-0"},{title:i(()=>t[2]||(t[2]=[f("Edit Cookie")])),default:i(()=>[n(le)]),_:1})):(r(),v(Z,{key:1}))]),_:1}),n(de,{state:k(u),onCancel:t[0]||(t[0]=a=>k(u).hide()),onSubmit:E},null,8,["state"])]),_:1}))}});export{Be as default};
